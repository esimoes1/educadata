#!/bin/bash

## convert_zip_gzip.sh - Extrai arquivos ZIP e converte TXT para CSV
## Escrito por: George Gomes (Fortaleza - Ceará)
## E-mail: georgegomesf@gmail.com

## Extrai ####
unzip PNADC_022016_educacao_20180518.zip -d . 

## Cria CSV com delimiatdores
cut -c1-4,5-5,6-7,8-9,10-11,12-20,21-27,28-29,30-31,32-32,33-33,34-34,35-49,50-64,65-73,74-76,77-78,79-80,81-82,83-83,84-85,86-87,88-91,92-94,95-95,96-96,97-97,98-98,99-100,101-102,103-103,104-104,105-105,106-106,107-108,109-109,110-110,111-111,112-112,113-113,114-115,116-117,118-118,119-119,120-120,121-121,122-122,123-124,125-125,126-126,127-127,128-128,129-129,130-130,131-131,132-132,133-133,134-134,135-135,136-136,137-137,138-138,139-139,140-140,141-141,142-142,143-144,145-145,146-146,147-147,148-148,149-149,150-150,151-151,152-152,153-153,154-155,156-157,158-159,160-160,161-164,165-165,166-166,167-171,172-172,173-173,174-174,175-175,176-176,177-177,178-179,180-180,181-181,182-183,184-185,186-186,187-187,188-188,189-189,190-190,191-192,193-194,195-195,196-196,197-197,198-198,199-199,200-200,201-201,202-202,203-203,204-204,205-205,206-213,214-214,215-215,216-223,224-224,225-225,226-226,227-227,228-228,229-236,237-237,238-238,239-246,247-249,250-252,253-253,254-255,256-257,258-259,260-263,264-264,265-265,266-270,271-271,272-272,273-273,274-274,275-275,276-276,277-277,278-278,279-286,287-287,288-288,289-296,297-297,298-298,299-299,300-300,301-301,302-309,310-310,311-311,312-319,320-322,323-325,326-326,327-327,328-328,329-329,330-337,338-338,339-339,340-347,348-348,349-349,350-350,351-351,352-352,353-353,354-361,362-362,363-363,364-371,372-374,375-377,378-378,379-379,380-380,381-381,382-382,383-384,385-385,386-386,387-387,388-389,390-390,391-392,393-393,394-395,396-397,398-399,400-400,401-401,402-402,403-403,404-404,405-412,413-413,414-421,422-422,423-430,431-431,432-439,440-440,441-448,449-449,450-457,458-459,460-461,462-462,463-463,464-465,466-466,467-467,468-468,469-469,470-470,471-471,472-472,473-473,474-475,476-477,478-479,480-480,481-481,482-482,483-483,484-491,492-499,500-500,501-508,509-516,517-524,525-525,526-526,527-529,530-532,533-535,536-538,539-541,542-542,543-543,544-551,552-559,560-567,568-575,576-576,577-584,585-592,593-593 PNADC_022016_educacao_20180518.txt --output-delimiter=';' > PNADC_022016_educacao_20180518.csv

## Inclui cabeçalho (nomes das variáveis)
sed -i "1s/^/ANO;TRIMESTRE;UF;CAPITAL;RM_RIDE;UPA;ESTRATO;V1008;V1014;V1016;V1022;V1023;V1027;V1028;V1029;POSEST;V2001;V2003;V2005;V2007;V2008;V20081;V20082;V2009;V2010;V3001;V3002;V3002A;V3003;V3003A;V3004;V3004A;V3005;V3005A;V3006;V3006A;V3006B;V3006C;V3007;V3008;V3009;V3009A;V3010;V3011;V3010A;V3011A;V3012;V3013;V3013A;V3013B;V3014;V3017;V3018;V3019;V3020;V3021;V3022;V3023;V3024;V3025;V3026;V3028;V3029;V3030;V3032;V3033;V3034;V4001;V4002;V4003;V4004;V4005;V4006;V4006A;V4007;V4008;V40081;V40082;V40083;V4009;V4010;V4012;V40121;V4013;V40132;V40132A;V4014;V4015;V40151;V401511;V401512;V4016;V40161;V40162;V40163;V4017;V40171;V401711;V4018;V40181;V40182;V40183;V4019;V4024;V4025;V4026;V4027;V4028;V4029;V4032;V4033;V40331;V403311;V403312;V40332;V403321;V403322;V40333;V403331;V4034;V40341;V403411;V403412;V40342;V403421;V403422;V4039;V4039C;V4040;V40401;V40402;V40403;V4041;V4043;V40431;V4044;V4045;V4046;V4047;V4048;V4049;V4050;V40501;V405011;V405012;V40502;V405021;V405022;V40503;V405031;V4051;V40511;V405111;V405112;V40512;V405121;V405122;V4056;V4056C;V4057;V4058;V40581;V405811;V405812;V40582;V405821;V405822;V40583;V405831;V40584;V4059;V40591;V405911;V405912;V40592;V405921;V405922;V4062;V4062C;V4063;V4063A;V4064;V4064A;V4071;V4072;V4072A;V4073;V4074;V4074A;V4075A;V4075A1;V4076;V40761;V40762;V40763;V4077;V4078;V4078A;V4082;VI5001A;VI5001A2;VI5002A;VI5002A2;VI5003A;VI5003A2;VI5004A;VI5004A2;VI5006A;VI5006A2;VI5007A;VI5007A2;VD2002;VD2003;VD2004;VD3004;VD3005;VD3006;VD4001;VD4002;VD4003;VD4004;VD4005;VD4007;VD4008;VD4009;VD4010;VD4011;VD4012;VD4013;VD4014;VD4015;VD4016;VD4017;VD4018;VD4019;VD4020;VDI4022;VD4023;VD4030;VD4031;VD4032;VD4033;VD4034;VD4035;VD4036;VD4037;VDI4047;VDI4048;VDI5001;VDI5002;VDI5003;VDI5004;VDI5005;VDI5006\n/" PNADC_022016_educacao_20180518.csv
